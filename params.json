{"name":"Diffbot-java-client","tagline":"This API offers, via diffbot.com, the possibility to map unstructured web data into java classes or its manipulation as raw JSON.","body":"# Diffbot API Java client\r\n\r\n## I- Preface\r\n\r\nThis API offers, via  [diffbot](http://diffbot.com/), the possibility to map unstructured web data into java classes or its manipulation as raw JSON.\r\n\r\nIt offers three approaches to handling data received from the diffbot API :\r\n* Filling java classes with json data using [Jackson](http://jackson.codehaus.org/â€Ž)'s pojo marshalling.\r\n* Raw json manipulation through [JSONObjec](http://www.json.org/javadoc/org/json/JSONObject.html).\r\n* Raw json manipulation through jackson's [JsonNode](http://jackson.codehaus.org/1.7.9/javadoc/org/codehaus/jackson/JsonNode.html).\r\n\r\n## II - Installation\r\n\r\n### II-1 Installation requirements:\r\n\r\n* Maven 3 : for compiling the project and managing dependencies\r\n* The Java Development Kit v 1.7 (JDK 1.7) : the jdk should be properly installed and configured to be used with maven\r\n* Internet connection : internet connection is required for downloading dependencies through maven and executing the demo and the unit tests.\r\n\r\n### II-2 Adding the maven dependencies\r\n\r\n1. Compiling the project\r\nIn order to make the diffbot-java library available in your local maven repository, run maven's `install` command from within the diffbot-java directory :\r\n```Shell\r\n$> mvn install\r\n```\r\n\r\n2. Adding the dependency\r\nNow diffbot-java library dependency is accessible via the following maven dependency :\r\n```XML\r\n\t<dependency>\r\n        <groupId>diffbot</groupId>\r\n        <artifactId>diffbot-java</artifactId>\r\n        <version>1.0-SNAPSHOT</version>\r\n    </dependency>\r\n```\r\n\r\n3. Example maven pom file ( from the demo project ) :\r\n```XML\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n    <groupId>diffbot</groupId>\r\n    <artifactId>diffbot-java-demo</artifactId>\r\n    <version>1.0-SNAPSHOT</version>\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>diffbot</groupId>\r\n            <artifactId>diffbot-java</artifactId>\r\n            <version>1.0-SNAPSHOT</version>\r\n        </dependency>\r\n    </dependencies>\r\n</project>\r\n```\r\n\r\n## III- Configuration\r\n\r\nA developer token must be provided in order to be able access the diffbot api. When using the `diffbot-java` client api it can be done through the client's constructor.\r\n\r\n```Java\r\n\t...\r\n    public static void main(String[] args ){\r\n        String testToken=\"3....9c359\";//set your api token here\r\n        // Create DiffbotClient instance with the appropriate token\r\n        DiffbotClient articlesClient = new DiffbotClient(testToken);\r\n     ...\r\n     }\r\n     ...\r\n```\r\n\r\nOptionally , it is possible to choose a specific api version to work with :\r\n```Java\r\n\t...\r\n    public static void main(String[] args ){\r\n        String testToken=\"3....9c359\";//set your api token here\r\n        // Create DiffbotClient instance with the appropriate token and version\r\n        DiffbotClient articlesClient = new DiffbotClient(testToken,\"2\");\r\n     ...\r\n     }\r\n     ...\r\n```\r\nThe second constructor parameter specifies the desired api version.\r\n\r\n## IV- Third party dependencies\r\nThis api uses :\r\n* Apache's HttpComponents - HttpClient for http operations\r\n* Jackson framework for pojo-json marshalling\r\n* Jackson's JsonNode as an option for raw json manipulation\r\n* json.org's JSONObject as an option for raw json manipulation\r\n\r\n\r\n## V- Usage\r\nThis API follows the convention over configuration principle in order to allow access to the [diffbot](http://diffbot.com/) API.\r\n\r\n### V-1- Understanding diffbot's RESTful API\r\nDiffbot offers a RESTful API for turning unstructured web pages into structured json data.\r\n\r\nThis is example JSON data made by the article API at http://api.diffbot.com/v2/article :\r\n\r\n```JSON\r\n{\r\n  \"type\": \"article\",\r\n  \"icon\": \"http://www.diffbot.com/favicon.ico\",\r\n  \"title\": \"Diffbot's New Product API Teaches Robots to Shop Online\",\r\n  \"author\": \"John Davi\",\r\n  \"date\": \"Wed, 31 Jul 2013 08:00:00 GMT\",\r\n  \"media\": [\r\n    {\r\n      \"primary\": \"true\",\r\n      \"link\": \"http://www.youtube.com/embed/lfcri5ungRo?feature=oembed\",\r\n      \"type\": \"video\"\r\n    }\r\n  ],\r\n  \"tags\": [\r\n    \"e-commerce\",\r\n    \"SaaS\"\r\n  ]\r\n  \"url\": \"http://blog.diffbot.com/diffbots-new-product-api-teaches-robots-to-shop-online/\",\r\n  \"humanLanguage\": \"en\",\r\n  \"text\": \"Diffbot's human wranglers are proud today to announce the release of our newest product: an API for... products!\\nThe Product API can be used for extracting clean, structured data from any e-commerce product page. It automatically makes available all the product data you'd expect: price, discount/savings amount, shipping cost, product description, any relevant product images, SKU and/or other product IDs.\\nEven cooler: pair the Product API with Crawlbot, our intelligent site-spidering tool, and let Diffbot determine which pages are products, then automatically structure the entire catalog. Here's a quick demonstration of Crawlbot at work:\\nWe've developed the Product API over the course of two years, building upon our core vision technology that's extracted structured data from billions of web pages, and training our machine learning systems using data from tens of thousands of unique shopping sites. We can't wait for you to try it out.\\nWhat are you waiting for? Check out the Product API documentation and dive on in! If you need a token, check out our pricing and plans (including our Free plan).\\nQuestions? Hit us up at support@diffbot.com .\"\r\n}\r\n```\r\n### V-2- Understanding diffbot-java API\r\n\r\nUsing diffbot-java client library this data can be :\r\n* Mapped to any class with fields names matching json fields (type,icon,title,author ...).\r\n* Or manipulated as raw json data using the JSONObject API or Jackson's JsonNode\r\n\r\n#### V-2-1 Using the article API\r\n\r\n>The Article API is used to extract clean article text from news article, blog post and similar text-heavy web pages.\r\n\r\nThis is an example java class that could be filled with data from the articles API according to fields' names :\r\n\r\n```Java\r\npublic class BlogPost {\r\n    private String title;\r\n    private String author;\r\n    private String text;\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getAuthor() {\r\n        return author;\r\n    }\r\n\r\n    public void setAuthor(String author) {\r\n        this.author = author;\r\n    }\r\n\r\n    public String getText() {\r\n        return text;\r\n    }\r\n\r\n    public void setText(String text) {\r\n        this.text = text;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return \"BlogPost{\" +\r\n                \"title='\" + title + '\\'' +\r\n                \", author='\" + author + '\\'' +\r\n                \", text='\" + text + '\\'' +\r\n                '}';\r\n    }\r\n}\r\n```\r\n\r\nIn order to fill this class with data all we need to do is  :\r\n\r\n```Java\r\n\t...\r\n\t\r\n    public static void main(String[] args ){\r\n\r\n        String testToken=\"3....9c359\";//set your api token here \r\n\r\n        // Create DiffbotClient instance with the appropriate token\r\n        DiffbotClient client = new DiffbotClient(testToken);\r\n\r\n        /*\r\n         article data is loaded into the BlogPost class fields depending on the fields' names\r\n         if the class has a certain field available in the RESTful article resource then the field is filled with the\r\n         appropriate data\r\n         */\r\n       \r\n        BlogPost b= (BlogPost) client.getArticle(BlogPost.class,\"http://www.xconomy.com/san-francisco/2012/07/25/diffbot-is-using-computer-vision-to-reinvent-the-semantic-web/\");\r\n        System.out.println(b.toString());\r\n\r\n    }\r\n\t...\r\n```\r\n\r\n\r\n\r\n#### V-2-2 Using the products API\r\n\r\n>The Product API analyzes a shopping or e-commerce product page and returns information on the product.\r\n\r\nThis is example JSON data made by the product API at http://api.diffbot.com/v2/product :\r\n\r\n```JSON\r\n{\r\n  \"type\": \"product\",\r\n  \"products\": [\r\n    {\r\n      \"title\": \"iRobot 650 Roomba Vacuuming Robot\",\r\n      \"description\": \"The new iRobot Roomba 650 Vacuum Cleaning Robot provides a superior level of cleaning with less work for you. With AeroVac Technology and a new brush design, Roomba 650 is better equipped to handle fibers like hair, pet fur, lint and carpet fuzz. Materials: Vacuum Cleaning Robot Dimensions: 17 inches long x 18 inches wide x 5 inches high Weight: 11 pounds Included parts: One (1)Roomba 650 Vacuum Cleaning Robot With AeroVac Bin, one (1) Self-Charging Home Base, one (1) Battery Charger, one (1) Extra AeroVac Filter, one (1) Auto Virtual Wall and one (1) Brush Cleaning Tool Power source: Battery Model: iRobot Roomba 650\",\r\n      \"offerPrice\": \"$399.99\",\r\n      \"productId\": \"15268099\",\r\n      \"media\": [\r\n        {\r\n          \"height\": 320,\r\n          \"width\": 320,\r\n          \"primary\": true,\r\n          \"link\": \"http://ak1.ostkcdn.com/images/products/7886009/cc8883ce-f6a0-44a7-836b-b55b4f9ce1ef_320.jpg\",\r\n          \"caption\": \"The new iRobot Roomba 650 Vacuum Cleaning Robot provides a superior level of cleaning with less work for you. With AeroVac Technology and a new brush design, Roomba 650 is better equipped to handle fibers like hair, pet fur, lint and carpet fuzz.\",\r\n          \"type\": \"image\",\r\n          \"xpath\": \"/HTML/BODY/DIV[@id='product-page']/DIV[@id='bd']/DIV[@id='pageContainer']/DIV[@id='productWrap']/DIV[@id='prod_leftCol']/DIV[@id='prod_main']/DIV[@id='prod_mainLeft']/DIV[@id='proImageContainer']/DIV[@id='proImageHero']/DIV[@class='proImageStack']/DIV[@class='proImageCenter']/IMG\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \"url\": \"http://www.overstock.com/Home-Garden/iRobot-650-Roomba-Vacuuming-Robot/7886009/product.html\"\r\n}\r\n```\r\n\r\nThis is an example java class that could be filled with data from the articles API according to fields' names :\r\n\r\n```Java\r\npackage com.diffbot.clients;\r\n\r\n/**\r\n * Created by wadi chemkhi on 10/01/14.\r\n * Email : wadi.chemkhi@gmail.com\r\n */\r\npublic class Product {\r\n    String title;\r\n    String description;\r\n    String offerPrice;\r\n    String regularPrice;\r\n    String saveAmount;\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public String getOfferPrice() {\r\n        return offerPrice;\r\n    }\r\n\r\n    public void setOfferPrice(String offerPrice) {\r\n        this.offerPrice = offerPrice;\r\n    }\r\n\r\n    public String getRegularPrice() {\r\n        return regularPrice;\r\n    }\r\n\r\n    public void setRegularPrice(String regularPrice) {\r\n        this.regularPrice = regularPrice;\r\n    }\r\n\r\n    public String getSaveAmount() {\r\n        return saveAmount;\r\n    }\r\n\r\n    public void setSaveAmount(String saveAmount) {\r\n        this.saveAmount = saveAmount;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return \"Product{\" +\r\n                \"title='\" + title + '\\'' +\r\n                \", description='\" + description + '\\'' +\r\n                \", offerPrice='\" + offerPrice + '\\'' +\r\n                \", regularPrice='\" + regularPrice + '\\'' +\r\n                \", saveAmount='\" + saveAmount + '\\'' +\r\n                '}';\r\n    }\r\n}\r\n\r\n```\r\n\r\nA List of java POJOs can be generated according to the product api response data through the `DiffbotClient` .\r\n\r\n```Java\r\n\t...\r\n\r\n    public static void main(String[] args ){\r\n\r\n        String testToken=\"3....9c359\";//set your api token here\r\n\r\n        // Create DiffbotClient instance with the appropriate token\r\n        DiffbotClient client = new DiffbotClient(testToken);\r\n\r\n        // Received products data (json array) is loaded into a List of Product POJOs depending on the class fields' names\r\n        List<Product> l= (List) client.getProducts(Product.class,\"http://www.overstock.com/Home-Garden/iRobot-650-Roomba-Vacuuming-Robot/7886009/product.html\");\r\n\r\n        for(Product p :l)\r\n        System.out.println(p.toString());\r\n\r\n    }\r\n\t...\r\n```\r\n\r\n\r\n#### V-3-3 Calling any API using it's name\r\n\r\n##### The `DiffbotClient.callApi` method :\r\n\r\nThis method offers the possibility to call any available diffbot api using it's name.\r\nThere two overloaded signatures for this method :\r\n\r\n1.`public Object callApi(String api,ResponseType responseType,String url) throws IOException`\r\n\r\nThis method returns a raw json manipulation Object that can be either json.org's `JSONObject` or Jackson's `JsonNode`, if preferred.\r\nThe choice can be made using the DiffbotClient.ResponseType enumeration : `public enum ResponseType{ Jackson, JSONObject }`\r\n\r\nUsage example :\r\n```java\r\nDiffbotClient client = new DiffbotClient(testToken);\r\nJsonNode a= (JsonNode) client.callApi(\"article\",DiffbotClient.ResponseType.Jackson,\"http://www.xconomy.com/san-francisco/2012/07/25/diffbot-is-using-computer-vision-to-reinvent-the-semantic-web/\");\r\n```\r\n\r\n2.`public Object callApi(String api,Class<?> clazz ,String url) throws IOException`\r\n\r\nThis method returns an instance of the `clazz` class filled with data returned from the REST api call\r\n\r\nUsage example :\r\n```java\r\nDiffbotClient client = new DiffbotClient(testToken);\r\nBlogPost a= (BlogPost) client.callApi(\"article\",BlogPost.class,\"http://wadi-chemkhi.blogspot.com/2013/09/la-conquete-de-lexcellence.html\");\r\n```\r\n\r\n##### Calling Custom API  API using it's name\r\n\r\nUsing diffbot's `Custom API Toolkit` it's possible to define custom APIs to extract data from web sites according to custom rules.\r\n\r\nThese custom APIs are accessible via the `DiffbotClient.callApi` method when provided with appropriate custom API method.\r\n\r\nUsage example :\r\n```java\r\nDiffbotClient client = new DiffbotClient(testToken);\r\nBlogPost a= (BlogPost) client.callApi(\"CustomAPI\",BlogPost.class,\"http://wadi-chemkhi.blogspot.com/2013/09/la-conquete-de-lexcellence.html\");\r\n```\r\n\r\nPlease notice that the custom API named `\"CustomAPI\"` must be configured on the account accessible by the provided token.\r\n\r\n#### V-3-4 Accessing the Analyse API\r\n\r\n#### V-3-5 Submitting a crawl job\r\n\r\n## VI- Runing the Demo\r\n\r\n\r\nPlease notice that the previous steps are necessary in order to compile and run the demo.\r\n \r\nDemo code :\r\n\r\n```Java\r\npackage com.diffbot.clients.demo;\r\n\r\nimport com.diffbot.clients.DiffbotClient;\r\n\r\n/**\r\n * Created by wadi chemkhi on 02/01/14.\r\n * Email : wadi.chemkhi@gmail.com\r\n */\r\npublic class Demo {\r\n\r\n    public static void main(String[] args ){\r\n\r\n        String testToken=\"353883355a5c7ff1793b14f81e19c359\";\r\n\r\n        // Create DiffbotClient instance with the appropriate token\r\n        DiffbotClient articlesClient = new DiffbotClient(testToken);\r\n\r\n        /*\r\n         article data is loaded into the Article class fields depending on the fields' names\r\n         if the class has a certain field available in the RESTful article resource then the field is filled with the\r\n         appropriate data\r\n         */\r\n        Article a= (Article) articlesClient.getArticle(Article.class,\"http://www.xconomy.com/san-francisco/2012/07/25/diffbot-is-using-computer-vision-to-reinvent-the-semantic-web/\");\r\n        System.out.println(a.toString());\r\n\r\n        /*\r\n         Same thing with the BlogPost class. Fields are filled with the appropriate data depending on their names\r\n         */\r\n        BlogPost b= (BlogPost) articlesClient.getArticle(BlogPost.class,\"http://www.xconomy.com/san-francisco/2012/07/25/diffbot-is-using-computer-vision-to-reinvent-the-semantic-web/\");\r\n        System.out.println(b.toString());\r\n\r\n    }\r\n}\r\n```\r\n\r\nCompile the demo with maven from within the demo folder :\r\n\r\n```Shell \r\n$> mvn compile\r\n```\r\n\r\nSee it working by using the maven exec command :\r\n\r\n```Shell \r\n$> mvn exec:java\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}